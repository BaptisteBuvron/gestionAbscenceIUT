{% extends 'base.html.twig' %}


{% block title %}
    Modifier un rapport d'absence
{% endblock %}


{% form_theme form 'absence/_absence.html.twig' %}

{% block body %}
<h1>Modification d'un rapport d'absences</h1>
<h2>Groupe : {{ absenceReport.name }}</h2>
{{ form_start(form) }}
    {{ form_widget(form) }}
<button type="submit" class="btn btn-primary">Modifier</button>
{{ form_end(form) }}


<h2>Liste des absences correspondantes : </h2>
<div class="table-responsive">

    <table class="table table-striped table-bordered text-center">
        <thead>
        <tr>
            <th>Nom</th>
            <th>Prénom</th>
            <th>Valide ?</th>
            <th>Justificatif</th>
            {% if is_granted('ROLE_YEAR_RESPONSIBLE') %}
                <th>Voir</th>
            {% endif %}
            {% if is_granted('ROLE_ADMIN') %}
            <th>Modifier</th>
            {% endif %}
        </tr>
        </thead>
        <tbody>
        {% for absence in absenceReport.absences %}
        <tr>
            <td>{{ absence.student.lastName }}</td>
            <td>{{ absence.student.firstName }}</td>
            <td>
                {% if absence.isValid == true %}
                    <span class="badge bg-success">Justifier</span>
                {% elseif absence.isValid is null %}
                    <span class="badge bg-secondary">A Justifier</span>
                {% else %}
                    <span class="badge bg-danger">Non Justifié</span>
                {% endif %}
            </td>

            <td>{% if absence.proofFileName %}
                Oui
                {% else %}
                    Non
                {% endif %}
            </td>

            {% if is_granted('ROLE_YEAR_RESPONSIBLE') %}
            <td><a href="{{ path('absence_show', {'id' : absence.id}) }}" class="btn btn-primary">Voir</a></td>
            {% endif %}
            {% if is_granted('ROLE_ADMIN') %}
            <td>
                <a href="{{ path('absence_edit', {'id' : absence.id}) }}" class="btn btn-primary">Modifier</a>
            </td>
            {% endif %}
        </tr>
        {% endfor %}
        </tbody>

    </table>
</div>


{% endblock %}
